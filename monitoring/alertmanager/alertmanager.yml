global:
  resolve_timeout: 5m

route:
  receiver: ${ALERT_ROUTE_RECEIVER}
  group_by: ["alertname", "service"]
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 4h

receivers:
  - name: default-log
  - name: slack
    slack_configs:
      - api_url: ${ALERT_SLACK_WEBHOOK_URL}
        channel: "#alerts"
        send_resolved: true
        title: "[{{ .Status | toUpper }}] {{ .CommonLabels.alertname }}"
        text: >-
          {{ range .Alerts }}
          â€¢ {{ .Annotations.summary }}\n{{ .Annotations.description }}
          {{ end }}

inhibit_rules:
  - source_matchers:
      - severity="critical"
    target_matchers:
      - severity="warning"
    equal: ["alertname", "service"]
